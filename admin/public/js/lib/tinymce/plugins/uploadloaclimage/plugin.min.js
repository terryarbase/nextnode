tinymce.create("tinymce.plugins.uploadloaclimage",{init:function(e,a){console.log("> url",a),e.addCommand("mceUploadImage",function(){var a=function(a){if(!a)return!1;e.insertContent('<img src="%s" />'.replace("%s",a)),e.focus(),e.windowManager.close()};e.windowManager.open({title:"Upload Image",body:[{type:"container",html:'<form action="" method="POST" enctype="multipart/form-data"><div class="mce-container" hidefocus="1" tabindex="-1"><div class="mce-container-body"><label>Select a file<br /><input type="file" name="file" id="upload-image" accept="image/*" class="mce-textbox mce-placeholder" hidefocus="true"></label></div></div></form>'}],onSubmit:function(){return function(e,a){var t=document.getElementById(e).files;if(!(t.length>0))return a(!1);var o=t[0],n=new FileReader;n.readAsDataURL(o),n.onload=function(e){return a(e.target.result)}}("upload-image",a),!1}})}),e.addButton("uploadloaclimage",{title:"Upload Local Image",cmd:"mceUploadImage",icon:"image"})},getInfo:function(){return{longname:"Upload LocalImage",author:"Fran√ßois Jacquet",authorurl:"https://github.com/francoisjacquet/tinymce-uploadimage",infourl:"https://github.com/francoisjacquet/tinymce-uploadimage/blob/master/README.md",version:"0.1"}}}),tinymce.PluginManager.add("uploadloaclimage",tinymce.plugins.uploadloaclimage);